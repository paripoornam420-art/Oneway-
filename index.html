<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Oneway Taxi Booking</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --yellow:#FFD000;
}
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:#f4f4f4;
}
header{
  background:var(--yellow);
  padding:14px;
  text-align:center;
  font-size:20px;
  font-weight:bold;
}
.card{
  background:#fff;
  margin:16px;
  padding:16px;
  border-radius:14px;
}
.trip-toggle{
  display:flex;
  gap:10px;
  margin-bottom:14px;
}
.trip-toggle button{
  flex:1;
  padding:10px;
  border-radius:20px;
  border:1px solid #ccc;
  background:#eee;
  font-weight:bold;
}
.trip-toggle .active{
  background:#000;
  color:#fff;
}
label{
  display:block;
  margin-top:12px;
  font-size:14px;
}
input{
  width:100%;
  padding:11px;
  margin-top:6px;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:15px;
}
.location-btn{
  margin-top:10px;
  width:100%;
  padding:12px;
  border:none;
  border-radius:10px;
  background:#eee;
  font-weight:bold;
  cursor:pointer;
}
.main-btn{
  margin-top:20px;
  width:100%;
  padding:14px;
  border:none;
  border-radius:30px;
  background:var(--yellow);
  color:#000;
  font-size:16px;
  font-weight:bold;
}
</style>
</head>

<body>

<header>Trip Details</header>

<div class="card">

  <!-- Trip Type -->
  <div class="trip-toggle">
    <button id="onewayBtn" class="active" onclick="setTrip('Oneway')">One Way</button>
    <button id="roundBtn" onclick="setTrip('Round')">Round Trip</button>
  </div>
  <input type="hidden" id="tripType" value="Oneway">

  <!-- Pickup -->
  <label>Pickup Location</label>
  <input id="pickup" placeholder="Detecting your location..." autocomplete="off">

  <button class="location-btn" onclick="useCurrentLocation()">üìç Use My Current Location</button>

  <!-- Drop -->
  <label>Drop Location</label>
  <input id="drop" placeholder="Enter drop location" autocomplete="off">

  <!-- Date & Time -->
  <label>Pickup Date</label>
  <input type="date" id="date">

  <label>Pickup Time</label>
  <input type="time" id="time">

  <!-- Return -->
  <label id="returnLabel" style="display:none;">Return Date</label>
  <input type="date" id="returnDate" style="display:none;">

  <!-- Estimate -->
  <button class="main-btn" onclick="goToFarePage()">Estimate</button>

</div>

<script>
let pickupAutocomplete, dropAutocomplete, geocoder;

/* ---------- TRIP TYPE ---------- */
function setTrip(type){
  tripType.value = type;
  onewayBtn.classList.remove("active");
  roundBtn.classList.remove("active");

  if(type==="Oneway"){
    onewayBtn.classList.add("active");
    returnDate.style.display="none";
    returnLabel.style.display="none";
  }else{
    roundBtn.classList.add("active");
    returnDate.style.display="block";
    returnLabel.style.display="block";
  }
}

/* ---------- GOOGLE MAPS INIT ---------- */
function initMaps(){
  pickupAutocomplete = new google.maps.places.Autocomplete(
    document.getElementById("pickup"),
    { types:["geocode"] }
  );
  dropAutocomplete = new google.maps.places.Autocomplete(
    document.getElementById("drop"),
    { types:["geocode"] }
  );
  geocoder = new google.maps.Geocoder();

  autoDetectLocation();
}

/* ---------- AUTO DETECT LOCATION ---------- */
function autoDetectLocation(){
  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(pos=>{
      const latlng={
        lat:pos.coords.latitude,
        lng:pos.coords.longitude
      };
      geocoder.geocode({location:latlng},(results,status)=>{
        if(status==="OK" && results[0]){
          pickup.value = results[0].formatted_address;
        }else{
          pickup.placeholder="Enter pickup location";
        }
      });
    },()=>{
      pickup.placeholder="Enter pickup location";
    });
  }
}

/* ---------- BUTTON LOCATION ---------- */
function useCurrentLocation(){
  pickup.value="Detecting...";
  autoDetectLocation();
}

/* ---------- ESTIMATE ---------- */
function goToFarePage(){
  const data={
    tripType:tripType.value,
    pickup:pickup.value,
    drop:drop.value,
    date:date.value,
    time:time.value,
    returnDate:returnDate.value
  };

  if(!data.pickup || !data.drop){
    alert("Please enter pickup & drop location");
    return;
  }

  localStorage.setItem("tripData",JSON.stringify(data));
  window.location.href="fare.html";
}
</script>

<!-- GOOGLE MAPS -->
<script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB79memjL-rc3k49TKKW8hauHoY1EUHrTM&libraries=places&callback=initMaps"
  async defer>
</script>

</body>
</html>