<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bell Taxi Booking</title>

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:#f5f5f5;
}
.header{
  background:#000;
  color:#fff;
  padding:15px;
  text-align:center;
}
.header span{
  color:#f5b000;
}
.tagline{
  background:#f5b000;
  text-align:center;
  padding:10px;
  font-weight:bold;
}
.container{
  padding:15px;
}
.toggle{
  display:flex;
  gap:10px;
  margin-bottom:15px;
}
.toggle button{
  flex:1;
  padding:12px;
  border:none;
  border-radius:25px;
  font-weight:bold;
  font-size:16px;
}
.active{ background:#f5b000; }
.inactive{ background:#eee; }

input, select{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:25px;
  border:1px solid #ccc;
  font-size:16px;
}

.row{
  display:flex;
  gap:10px;
}

.book-btn{
  margin-top:18px;
  background:#f5b000;
  border:none;
  padding:15px;
  width:100%;
  font-size:18px;
  border-radius:30px;
  font-weight:bold;
}

.note{
  margin-top:18px;
  text-align:center;
  background:#fff;
  padding:15px;
  border-radius:20px;
}
</style>
</head>

<body>

<div class="header">
  <h1>Bell <span>Taxi</span></h1>
  <p>On Your Location On Need</p>
</div>

<div class="tagline">All India Outstation Cab Service</div>

<div class="container">

  <!-- TRIP TYPE -->
  <div class="toggle">
    <button id="onewayBtn" class="active" onclick="setTrip('One Way')">One Way Trip</button>
    <button id="roundBtn" class="inactive" onclick="setTrip('Round Trip')">Round Trip</button>
  </div>

  <input type="text" id="pickup" placeholder="Enter pickup city">
  <input type="text" id="drop" placeholder="Enter destination city">

  <!-- DATE & TIME -->
  <div class="row">
    <input type="date" id="travelDate">
    <input type="time" id="travelTime">
  </div>

  <!-- VEHICLE -->
  <select id="vehicle">
    <option value="">Select Vehicle</option>
    <option value="Mini">Mini</option>
    <option value="Sedan">Sedan</option>
    <option value="SUV">Any SUV</option>
    <option value="Innova">Innova</option>
  </select>

  <input type="tel" id="mobile" placeholder="Enter mobile number">

  <button class="book-btn" onclick="submitBooking()">Check Price & Book Cab</button>

  <div class="note">
    <h3>No Return Fare</h3>
    <p>One-Way Cab Fare | No Hidden Charges<br>Minimal Advance</p>
  </div>

</div>

<script>
let tripType = "One Way";
const DRIVER_BATA = 400;

const FARES = {
  "One Way":{
    minKm:130,
    rates:{ Mini:13, Sedan:14, SUV:19, Innova:20 }
  },
  "Round Trip":{
    minKm:250,
    rates:{ Mini:12, Sedan:13, SUV:18, Innova:19 }
  }
};

function setTrip(type){
  tripType = type;
  onewayBtn.className = type==="One Way" ? "active":"inactive";
  roundBtn.className = type==="Round Trip" ? "active":"inactive";
}

function submitBooking(){
  const pickup = document.getElementById("pickup").value;
  const drop = document.getElementById("drop").value;
  const date = travelDate.value;
  const time = travelTime.value;
  const vehicle = document.getElementById("vehicle").value;
  const mobile = document.getElementById("mobile").value;

  if(!pickup||!drop||!date||!time||!vehicle||mobile.length<10){
    alert("Please fill all details");
    return;
  }

  const service = new google.maps.DistanceMatrixService();
  service.getDistanceMatrix({
    origins:[pickup],
    destinations:[drop],
    travelMode:"DRIVING"
  }, (res, status)=>{
    if(status!=="OK") return alert("Distance error");

    let km = Math.ceil(res.rows[0].elements[0].distance.value / 1000);
    const rule = FARES[tripType];
    if(km < rule.minKm) km = rule.minKm;

    const fare = (km * rule.rates[vehicle]) + DRIVER_BATA;

    navigator.geolocation.getCurrentPosition(pos=>{
      sendBooking(km, fare, pos.coords.latitude, pos.coords.longitude);
    });
  });
}

function sendBooking(km, fare, lat, lng){
  const data = new URLSearchParams({
    pickup:pickup.value,
    drop:drop.value,
    date:travelDate.value,
    time:travelTime.value,
    vehicle:vehicle.value,
    mobile:mobile.value,
    tripType,
    distance:km+" KM",
    fare:"â‚¹"+fare,
    bata:"â‚¹400",
    lat, lng
  });

  fetch("https://script.google.com/macros/s/AKfycbyb50XEKPuIY1BOMVsQwIlcPuwdyTFajmtXwl8zYyiQsPJKMEZ8epmJN6pOrA0l5yEU/exec",{
    method:"POST",
    body:data
  }).then(()=>{
    alert(
      "ðŸš• Bell Taxi\n\n"+
      "Vehicle: "+vehicle.value+"\n"+
      "Distance: "+km+" KM\n"+
      "Fare: â‚¹"+fare+" (Incl. Driver Bata)"
    );
  });
}
</script>

<script
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBXnBk1mKSeIF5_UNsLejhqUYFIbJqMXZk&libraries=places&callback=initMap"
async defer></script>

<script>
function initMap(){
  new google.maps.places.Autocomplete(pickup);
  new google.maps.places.Autocomplete(drop);
}
</script>

</body>
</html>