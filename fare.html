<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Fare Details</title>

<style>
body{font-family:Arial;background:#f3f3f3;margin:0}
.card{background:#fff;margin:16px;padding:18px;border-radius:26px}
.price{font-size:24px;color:#0a9d00;font-weight:bold}
.row{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid #eee}
.book-btn{width:100%;margin-top:14px;padding:16px;background:#ffc107;border:none;border-radius:30px;font-size:18px;font-weight:bold}
</style>
</head>

<body>

<div id="cards"></div>

<script>
const SCRIPT_URL="https://script.google.com/macros/s/AKfycbyb50XEKPuIY1BOMVsQwIlcPuwdyTFajmtXwl8zYyiQsPJKMEZ8epmJN6pOrA0l5yEU/exec";

const trip=JSON.parse(localStorage.getItem("tripData"));

const cars=[
 {name:"Dzire",rate:14,upto:245,bata:400},
 {name:"Etios",rate:15,upto:245,bata:400},
 {name:"SUV",rate:19,upto:245,bata:500},
 {name:"Innova",rate:20,upto:245,bata:500}
];

cars.forEach(c=>{
 const fare=c.rate*c.upto+c.bata;
 cards.innerHTML+=`
 <div class="card">
   <h3>${c.name}</h3>
   <div class="price">₹ ${fare}</div>

   <div class="row"><span>Included Km</span><span>${c.upto} Km</span></div>
   <div class="row"><span>Extra fare / Km</span><span>₹${c.rate}/Km</span></div>
   <div class="row"><span>Fuel Charges</span><span>Included</span></div>
   <div class="row"><span>Driver Charges</span><span>Included</span></div>
   <div class="row"><span>Night Charges</span><span>Included</span></div>

   <p style="font-size:14px">
     Toll, Parking, Permit, Carrier, Pet Charges Extra
   </p>

   <button class="book-btn"
     onclick="book('${c.name}',${fare},${c.upto})">
     Book Now
   </button>
 </div>`;
});

function book(car,fare,upto){
 fetch(SCRIPT_URL,{
  method:"POST",
  body:JSON.stringify({
    type:"book",
    route:`${trip.pickup} to ${trip.drop}`,
    mobile:trip.mobile,
    datetime:`${trip.date} - ${trip.time}`,
    car:`${car}`,
    fare:fare,
    uptoKm:upto,
    mapLink:trip.pickup
  })
 });
 alert("Booking Confirmed");
}
</script>
</body>
</html>