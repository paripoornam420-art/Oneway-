<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fare Options</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --yellow:#FFD000;
  --black:#111;
  --muted:#666;
  --green:#0b8a3e;
}
*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:#f2f3f5;
  color:var(--black);
}

/* HEADER */
.header{
  background:var(--yellow);
  padding:16px;
  text-align:center;
  font-size:20px;
  font-weight:800;
}

/* ROUTE INFO */
.route-box{
  background:var(--yellow);
  padding:6px 14px 14px;
  text-align:center;
}
.route{
  font-size:15px;
  font-weight:600;
}
.time{
  font-size:13px;
  color:#333;
}

/* CONTAINER */
.container{
  background:#fff;
  border-radius:26px 26px 0 0;
  padding:16px;
  margin-top:-10px;
  min-height:80vh;
}

/* CAR CARD */
.car-card{
  display:flex;
  gap:12px;
  padding:14px;
  border-radius:16px;
  background:#fafafa;
  box-shadow:0 6px 16px rgba(0,0,0,.08);
  margin-bottom:14px;
  align-items:center;
}

.car-img{
  width:70px;
  height:42px;
  background:#eee;
  border-radius:8px;
}

.car-info{
  flex:1;
}

.car-info h3{
  margin:0;
  font-size:16px;
}

.fare{
  font-size:20px;
  font-weight:900;
  color:var(--green);
  margin:4px 0;
}

.sub{
  font-size:12px;
  color:var(--muted);
  line-height:1.4;
}

/* BOOK BTN */
.book-btn{
  margin-top:8px;
  width:100%;
  border:none;
  padding:10px 0;
  border-radius:999px;
  font-size:14px;
  font-weight:700;
  background:var(--yellow);
  cursor:pointer;
}

/* FOOT NOTE */
.footer-note{
  margin-top:10px;
  font-size:12px;
  color:#555;
  text-align:center;
}
</style>
</head>

<body>

<div class="header">Fare Details</div>

<div class="route-box">
  <div class="route" id="routeText"></div>
  <div class="time" id="timeText"></div>
</div>

<div class="container" id="fareContainer">
  Calculating fare...
</div>

<script>
const GOOGLE_KEY="AIzaSyB79memjL-rc3k49TKKW8hauHoY1EUHrTM";

const CARS=[
  {name:"Hatchback (AC)", rate:13},
  {name:"Sedan (AC)", rate:14},
  {name:"SUV (AC)", rate:18},
  {name:"Innova / MPV (AC)", rate:20}
];

const MIN_KM=130;

const trip=JSON.parse(localStorage.getItem("tripData"));
routeText.innerText=`${trip.pickup} → ${trip.drop}`;
timeText.innerText=`${trip.date} ${trip.time}`;

const service=new google.maps.DistanceMatrixService();

service.getDistanceMatrix({
  origins:[trip.pickup],
  destinations:[trip.drop],
  travelMode:"DRIVING"
},(res,status)=>{
  if(status!=="OK"){
    fareContainer.innerText="Unable to calculate distance";
    return;
  }

  let km=Math.ceil(res.rows[0].elements[0].distance.value/1000);
  if(km<MIN_KM) km=MIN_KM;

  let html="";
  CARS.forEach(c=>{
    const fare=km*c.rate;
    html+=`
    <div class="car-card">
      <div class="car-img"></div>
      <div class="car-info">
        <h3>${c.name}</h3>
        <div class="fare">₹ ${fare.toLocaleString("en-IN")}</div>
        <div class="sub">
          Upto ${km} km · Extra ₹${c.rate}/km<br>
          Toll, Parking, State Permit, Carrier charges extra
        </div>
        <button class="book-btn">Book Now</button>
      </div>
    </div>`;
  });

  fareContainer.innerHTML=html;
});
</script>

<script
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB79memjL-rc3k49TKKW8hauHoY1EUHrTM">
</script>

</body>
</html>